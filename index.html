<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard Ejecutivo</title>
  <link rel="stylesheet" href="./styles.css" />

  <!-- SheetJS -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>

<body>
  <!-- TOP (Fijo) -->
  <header class="topFixed">
    <div class="topRow">
      <div class="brand">
        <div class="logo">ðŸ“Š</div>
        <div class="brandText">
          <div class="brandTitle">Dashboard Ejecutivo</div>
          <div class="brandSub" id="dataStatus">Sin datos cargados</div>
        </div>
      </div>

      <div class="topActions">
        <label class="btn">
          <input id="fileInput" type="file" accept=".xlsx,.xls,.csv" hidden />
          Cargar Excel
        </label>
        <button id="btnReset" class="btn ghost" type="button">Limpiar</button>
      </div>
    </div>

    <!-- FILTROS GLOBALES -->
    <div class="filtersBar">
      <div class="field">
        <label>AÃ±o A</label>
        <select id="yearA"></select>
      </div>

      <div class="field">
        <label>AÃ±o B</label>
        <select id="yearB"></select>
      </div>

      <div class="field">
        <label>Modo</label>
        <select id="mode">
          <option value="period">Periodo</option>
          <option value="accum">Acumulado</option>
        </select>
      </div>

      <!-- Periodo -->
      <div class="field" id="periodMonthWrap">
        <label>Mes</label>
        <select id="month"></select>
      </div>

      <!-- Acumulado (OpciÃ³n A: DE / A) -->
      <div class="field" id="accStartWrap">
        <label>DE</label>
        <select id="accStart"></select>
      </div>
      <div class="field" id="accEndWrap">
        <label>A</label>
        <select id="accEnd"></select>
      </div>

      <div class="field">
        <label>Sucursal</label>
        <select id="branch"></select>
      </div>

      <div class="field">
        <label>Vendedor</label>
        <select id="seller"></select>
      </div>
    </div>

    <!-- TABS -->
    <nav class="tabs">
      <button class="tab active" id="tabSucursal" type="button">Por Sucursal</button>
      <button class="tab" id="tabEmpleado" type="button">Por Empleado</button>
      <button class="tab" id="tabMarcas" type="button">Marcas</button>
      <button class="tab" id="tabCategorias" type="button">CategorÃ­as</button>
    </nav>
  </header>

  <!-- MAIN -->
  <main class="main">
    <!-- ====== PAGE: SUCURSAL ====== -->
    <section id="pageSucursal" class="page">
      <div class="pageHeader">
        <div class="pageTitle">Por Sucursal</div>
        <div class="pageMeta" id="metaSucursal">â€”</div>
      </div>

      <div class="rowControls">
        <div class="field wide">
          <label>KPI</label>
          <select id="kpiSucursal"></select>
        </div>
      </div>

      <div class="kpiStrip">
        <div class="kpiCard">
          <div class="kpiLabel">AÃ±o A</div>
          <div class="kpiValue" id="sucA">â€”</div>
        </div>
        <div class="kpiCard">
          <div class="kpiLabel">AÃ±o B</div>
          <div class="kpiValue" id="sucB">â€”</div>
        </div>
        <div class="kpiCard">
          <div class="kpiLabel">Dif $</div>
          <div class="kpiValue" id="sucDiffAbs">â€”</div>
        </div>
        <div class="kpiCard">
          <div class="kpiLabel">Dif %</div>
          <div class="kpiValue" id="sucDiffPct">â€”</div>
        </div>
      </div>

      <div class="grid2">
        <div class="card">
          <div class="cardHeader">
            <div class="cardTitle" id="chartTitleSucursal">GrÃ¡fica</div>
            <div class="muted" id="chartMetaSucursal">â€”</div>
          </div>
          <div class="chartWrap">
            <canvas id="chartSucursal"></canvas>
          </div>
        </div>

        <div class="card">
          <div class="cardHeader">
            <div class="cardTitle">Tabla</div>
            <div class="muted">Sucursal | AÃ±o A | AÃ±o B | Dif | %</div>
          </div>
          <div class="tableWrap">
            <table id="tableSucursal">
              <thead>
                <tr>
                  <th>Sucursal</th>
                  <th>AÃ±o A</th>
                  <th>AÃ±o B</th>
                  <th>Dif $</th>
                  <th>Dif %</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          <div class="muted small" id="warnSucursal"></div>
        </div>
      </div>
    </section>

    <!-- ====== PAGE: EMPLEADO ====== -->
    <section id="pageEmpleado" class="page hidden">
      <div class="pageHeader">
        <div class="pageTitle">Por Empleado</div>
        <div class="pageMeta" id="metaEmpleado">â€”</div>
      </div>

      <div class="rowControls">
        <div class="field wide">
          <label>KPI</label>
          <select id="kpiEmpleado"></select>
        </div>
        <div class="field wide">
          <label>Buscar empleado</label>
          <input id="empSearch" class="textInput" placeholder="Escribe un nombre..." />
        </div>
      </div>

      <div class="card">
        <div class="cardHeader">
          <div class="cardTitle">Tabla de empleados (TODOS)</div>
          <div class="muted" id="empTableMeta">â€”</div>
        </div>

        <div class="tableWrap">
          <table id="tableEmpleado">
            <thead>
              <tr>
                <th>Empleado</th>
                <th>Sucursal</th>
                <th>AÃ±o A</th>
                <th>AÃ±o B</th>
                <th>Dif $</th>
                <th>Dif %</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="muted small" id="warnEmpleado"></div>
      </div>
    </section>

    <!-- ====== PAGE: MARCAS ====== -->
    <section id="pageMarcas" class="page hidden">
      <div class="pageHeader">
        <div class="pageTitle">Marcas</div>
        <div class="pageMeta" id="metaMarcas">â€”</div>
      </div>

      <div class="rowControls">
        <div class="field">
          <label>MÃ©trica</label>
          <select id="metricMarca">
            <option value="ventas_con_iva">Ventas (con IVA)</option>
            <option value="utilidad">Utilidad</option>
            <option value="margen">Margen</option>
          </select>
        </div>
        <div class="field">
          <label>Top N</label>
          <select id="topMarca">
            <option value="10">10</option>
            <option value="20" selected>20</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
        </div>
      </div>

      <div class="grid2">
        <div class="card">
          <div class="cardHeader">
            <div class="cardTitle">GrÃ¡fica Top Marcas</div>
            <div class="muted" id="chartMetaMarcas">â€”</div>
          </div>
          <div class="chartWrap">
            <canvas id="chartMarcas"></canvas>
          </div>
        </div>

        <div class="card">
          <div class="cardHeader">
            <div class="cardTitle">Tabla ranking</div>
            <div class="muted">Marca | Ventas | Utilidad | Margen</div>
          </div>

          <div class="tableWrap">
            <table id="tableMarcas">
              <thead>
                <tr>
                  <th>Marca</th>
                  <th>Ventas</th>
                  <th>Utilidad</th>
                  <th>Margen</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <div class="muted small" id="warnMarcas"></div>
        </div>
      </div>
    </section>

    <!-- ====== PAGE: CATEGORIAS ====== -->
    <section id="pageCategorias" class="page hidden">
      <div class="pageHeader">
        <div class="pageTitle">CategorÃ­as</div>
        <div class="pageMeta" id="metaCategorias">â€”</div>
      </div>

      <div class="rowControls">
        <div class="field">
          <label>MÃ©trica</label>
          <select id="metricCat">
            <option value="ventas_con_iva">Ventas (con IVA)</option>
            <option value="utilidad">Utilidad</option>
            <option value="margen">Margen</option>
          </select>
        </div>
        <div class="field">
          <label>Top N</label>
          <select id="topCat">
            <option value="10">10</option>
            <option value="20" selected>20</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
        </div>
      </div>

      <div class="grid2">
        <div class="card">
          <div class="cardHeader">
            <div class="cardTitle">GrÃ¡fica Top CategorÃ­as</div>
            <div class="muted" id="chartMetaCategorias">â€”</div>
          </div>
          <div class="chartWrap">
            <canvas id="chartCategorias"></canvas>
          </div>
        </div>

        <div class="card">
          <div class="cardHeader">
            <div class="cardTitle">Tabla ranking</div>
            <div class="muted">CategorÃ­a | Ventas | Utilidad | Margen</div>
          </div>

          <div class="tableWrap">
            <table id="tableCategorias">
              <thead>
                <tr>
                  <th>CategorÃ­a</th>
                  <th>Ventas</th>
                  <th>Utilidad</th>
                  <th>Margen</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <div class="muted small" id="warnCategorias"></div>
        </div>
      </div>
    </section>
  </main>

  <script src="./app.js"></script>
</body>
</html>
